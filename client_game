# Importing modules from the main
from main import *
from client import *
from game import *

# Using a variable for the main loop
play = True

# Calling my classes and creating instances of them
c = Client()
g = Game()

# Main loop for the game
while play == True:

    # Checking if the quit button has been pressed
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            c.client.close()

            pygame.quit()
            sys.exit()

        # Moving the characters
        if event.type == pygame.KEYDOWN:
            if event.key == pygame.K_RIGHT:
                c.player1.x += 10
            if event.key == pygame.K_LEFT:
                c.player1.x -= 10
            if event.key == pygame.K_DOWN:
                c.player1.y += 10
            if event.key == pygame.K_UP:
                c.player1.y -= 10

    # Drawing the screen
    g.draw()
    c.player1.draw_player(g.screen)

    # Sending player coordinates to the server
    c.send_object(c.player1)

    # Receiving objects from the server
    c.receive_message()

    # Updating the screen
    g.update_screen()

    # Clockspeed
    clock.tick(80)
